<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v4.16.10"><title>Demo splitg</title><link rel="stylesheet" href="/_astro/index.DcQSNZ4P.css"><script type="module">class y{depths={};splitBlocksKeys=new Set;isSplitBlocked(){return this.splitBlocksKeys.size>0}}const S={check:()=>({split:!0})},C={check(e,t){return{transformNextResultCheck:(s,l)=>t+1===l?{...s,split:!1}:s}}},O=e=>({check(t){t.depths[e]??=0,t.depths[e]+=1,t.splitBlocksKeys.add(e)}}),b=e=>({check(t){t.depths[e]??=0,t.depths[e]-=1,t.depths[e]===0&&t.splitBlocksKeys.delete(e)}}),v=e=>({check:t=>{t.splitBlocksKeys.has(e)?t.splitBlocksKeys.delete(e):t.splitBlocksKeys.add(e)}}),B=[" "],L=["\\"],T=[["{","}"],["[","]"],["(",")"]],x=["'",'"'];function*I(e,t){const s=B,l=t?.escapes??L,o=t?.brackets??T,f=t?.quotes??x,k={...Object.fromEntries(s.map(n=>[n,S])),...Object.fromEntries(l?.map(n=>[n,C])??[]),...Object.fromEntries(o.map(([n,r])=>[[n,O(`${n}${r}`)],[r,b(`${n}${r}`)]]).flat()),...Object.fromEntries(f.map(n=>[n,v(n)]))};let i=-1,c=0;const u=new y;let p=null;const m=n=>e[n]??null;for(;;){i++;const n=m(i),r=k[n]??null;if(n===null)break;const h=(p??(E=>E))(r?.check?.(u,i)??{},i),g=h?.split??!1;p=h?.transformNextResultCheck??null,g&&!u.isSplitBlocked()&&(yield e.slice(c,i),c=i+1)}yield e.slice(c,i)}function j(e,t,s){return Array.from(I(e,{...s,splitters:s?.splitters}))}class a{constructor(t,s){this.context=t,this.selector=s}node(){return this.context.querySelector(`[x-selector=${JSON.stringify(this.selector)}]`)}nodeInput(){const t=this.node();return t instanceof HTMLInputElement?t:null}addOnChangeEventListener(t){return this.nodeInput()?.addEventListener("change",t),this.nodeInput()?.addEventListener("keyup",t),()=>{this.nodeInput()?.removeEventListener("change",t),this.nodeInput()?.removeEventListener("keyup",t)}}getValue(){return this.nodeInput()?.value}setValue(t){const s=this.nodeInput();s&&(s.value=t)}setInnerHTML(t){const s=this.node();s&&(s.innerHTML=t)}setTextContent(t){const s=this.node();s&&(s.textContent=t)}}class d extends HTMLElement{showResult=new a(this,"showresult");jsSample=new a(this,"jssample");input=new a(this,"input");connectedCallback(){this.input.addOnChangeEventListener(t=>{t.preventDefault(),this.evaluate(this.input.getValue()??"")}),this.evaluate(this.input.getValue()??"")}disconnectedCallback(){}setValue(t){this.input.setValue(t),this.evaluate(t)}evaluate(t){const s=j(t);this.showResult.setTextContent(JSON.stringify(s,null,2)),this.jsSample.setTextContent(`import { splitg } from "@jondotsoy/splitg";

const parts = splitg(${JSON.stringify(t)})
`+JSON.stringify(s,null,2).split(`
`).map((l,o)=>`//${o===0?" => ":" "}${l}
`).join(""))}}class w extends HTMLElement{connectedCallback(){const t=l=>l.parentElement instanceof d?l.parentElement:l.parentElement?t(l.parentElement):null,s=t(this);this.addEventListener("click",l=>{const o=l.currentTarget instanceof HTMLElement?l.currentTarget.textContent:null;o&&s?.setValue(o)})}}customElements.define("input-splitg",d);customElements.define("sample-button",w);
</script></head> <body> <div class="grid grid-rows-[auto_1fr_auto] h-screen gap-2"> <header> <!-- <h1>splitg</h1> --> </header> <div class="w-full max-w-screen-md mx-auto px-2">  <input-splitg type="text"> <input type="text" x-selector="input" placeholder="hello world!" value="hello world!" class="border px-4 py-2 rounded shadow w-full mb-1"> <div class="mb-3 overflow-auto py-4 flex flex-row flex-nowrap gap-2 [&>sample-button]:border [&>sample-button]:text-sm [&>sample-button]:px-2 [&>sample-button]:py-0 rounded [&>sample-button]:bg-gray-100 [&>sample-button]:text-nowrap [&>sample-button]:cursor-pointer"> <sample-button>Hello World!</sample-button><sample-button>find this [site: sample.com]</sample-button><sample-button>podman run [options] IMAGE [COMMAND [ARG...]]</sample-button><sample-button>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</sample-button> </div> <pre class="px-4 py-2 mb-4 bg-gray-500 text-white border font-mono"><code x-selector="showresult"></code></pre> <pre class="px-4 py-2 bg-gray-500 text-white border font-mono"><code x-selector="jssample"></code></pre> </input-splitg> </div> <footer> <!-- <footer>footer</footer> --> </footer> </div> </body></html>